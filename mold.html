<!DOCTYPE html>
<html>
<head>
    <title>Mold Risk Dashboard</title>
    <style>
        body {
            font-family: sans-serif;
            margin: 20px;
        }
        .container {
            display: flex;
            flex-wrap: wrap;
        }
        .space-card {
            border: 1px solid #ddd;
            padding: 15px;
            margin: 10px;
            width: 250px;
            box-shadow: 2px 2px 5px #eee;
        }
        .status-indicator {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 10px;
        }
        .green { background-color: green; }
        .amber { background-color: orange; }
        .red { background-color: red; }
        .scatter-plot {
            width: 500px;
            height: 300px;
            border: 1px solid #ccc;
            margin: 20px;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1>Mold Risk Dashboard</h1>
    <div class="container" id="space-cards">
        </div>
    <div class="scatter-plot">
        <canvas id="scatterChart"></canvas>
    </div>

    <script>
        // Sample data (replace with your actual data)
        const sampleData = [
            { space: "Bedroom", timestamp: "2023-10-26 10:00:00", humidity: 55, temperature: 20, hours: 1 },
            { space: "Bedroom", timestamp: "2023-10-26 11:00:00", humidity: 62, temperature: 21, hours: 1 },
            { space: "Bedroom", timestamp: "2023-10-26 12:00:00", humidity: 75, temperature: 15, hours: 1 },
            { space: "Kitchen", timestamp: "2023-10-27 10:00:00", humidity: 50, temperature: 22, hours: 1 },
            { space: "Kitchen", timestamp: "2023-10-27 11:00:00", humidity: 71, temperature: 20, hours: 1 },
            { space: "Kitchen", timestamp: "2023-10-27 12:00:00", humidity: 72, temperature: 21, hours: 1 },
            { space: "Living Room", timestamp: "2023-10-28 10:00:00", humidity: 65, temperature: 18, hours: 1 },
            { space: "Living Room", timestamp: "2023-10-28 11:00:00", humidity: 58, temperature: 23, hours: 1 },
            { space: "Living Room", timestamp: "2023-10-28 12:00:00", humidity: 78, temperature: 16, hours: 1 },
        ];

        function calculateRiskScore(rh, temperature) {
            if (rh < 60) return 0;
            if (rh < 70) return 1;
            if (rh >= 70) {
                if (temperature < 16 && rh > 65) return 2;
                else return 2;
            }
            return 0;
        }

        function getRagStatus(riskScore, durationHours) {
            const dailyAmber = 10;
            const dailyRed = 30;
            const weeklyRed = 100;
            if (durationHours <= 24) {
                if (riskScore < dailyAmber) return "Green";
                if (riskScore < dailyRed) return "Amber";
                return "Red";
            } else {
                if (riskScore < dailyAmber * 7) return "Green";
                if (riskScore < weeklyRed) return "Amber";
                return "Red";
            }
        }

        function createSpaceCards(data) {
            const spaceCards = document.getElementById("space-cards");
            const spaceData = {};

            data.forEach(item => {
                if (!spaceData[item.space]) {
                    spaceData[item.space] = { riskScores: [], totalHours: 0 };
                }
                spaceData[item.space].riskScores.push(calculateRiskScore(item.humidity, item.temperature));
                spaceData[item.space].totalHours += item.hours;
            });

            for (const space in spaceData) {
                const totalRisk = spaceData[space].riskScores.reduce((a, b) => a + b, 0);
                const status = getRagStatus(totalRisk, spaceData[space].totalHours);
                const card = document.createElement("div");
                card.className = "space-card";
                card.innerHTML = `
                    <h3>${space}</h3>
                    <div
