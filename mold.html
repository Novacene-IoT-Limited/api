<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Time Scatter with RAG Status</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    /* Basic reset and layout */
    * {
      box-sizing: border-box;
      margin: 0; 
      padding: 0;
    }
    body {
      font-family: Arial, sans-serif;
      background: #f0f0f0;
      color: #333;
      padding: 1rem;
    }
    .chart-container {
      width: 100%;
      max-width: 800px;
      margin: 0 auto;
      padding: 1rem;
      background: #fff;
      border-radius: 6px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    h1 {
      text-align: center;
      margin-bottom: 1rem;
      font-size: 1.4rem;
      font-weight: normal;
      color: #444;
    }

    /* Chart canvas styling */
    #ragChart {
      width: 100%;
      height: 400px;
    }

    /* Legend dots (optional) */
    .legend {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin-top: 0.5rem;
    }
    .legend-item {
      display: flex;
      align-items: center;
      gap: 0.3rem;
      font-size: 0.85rem;
      color: #666;
    }
    .dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      display: inline-block;
    }
    .dot.green {
      background: green;
    }
    .dot.orange {
      background: orange;
    }
    .dot.red {
      background: red;
    }
  </style>
</head>
<body>

<div class="chart-container">
  <h1>Time Scatter with RAG Status</h1>
  <canvas id="ragChart"></canvas>
  <div class="legend">
    <div class="legend-item"><span class="dot green"></span> <span>Low (<60%)</span></div>
    <div class="legend-item"><span class="dot orange"></span> <span>Caution (60-69%)</span></div>
    <div class="legend-item"><span class="dot red"></span> <span>High (≥70%)</span></div>
  </div>
</div>

<script>
/*
  EXAMPLE DATA: 
  Each point is { x: <date_or_time>, y: <humidity_value> }.
  For demonstration, we’ll store times as strings in "YYYY-MM-DDTHH:mm" form.
  Chart.js will parse them automatically if 'type: \"time\"' is used.
*/
const dataPoints = [
  { x: '2025-03-27T08:00', y: 55 },  // green
  { x: '2025-03-27T09:00', y: 63 },  // orange
  { x: '2025-03-27T10:00', y: 68 },  // orange
  { x: '2025-03-27T11:00', y: 72 },  // red
  { x: '2025-03-27T12:00', y: 75 },  // red
  { x: '2025-03-27T13:00', y: 59 },  // green
  { x: '2025-03-27T14:00', y: 67 },  // orange
  { x: '2025-03-27T15:00', y: 70 },  // red (borderline)
];

// RAG colour function: green <60, orange 60-69, red ≥70
function getPointColor(hum) {
  if (hum < 60)   return 'green';
  if (hum < 70)   return 'orange';
  return 'red';
}

// Build the scatter dataset
const ragDataset = {
  label: 'Humidity',
  data: dataPoints,
  showLine: false,  
  pointRadius: 6,   // bigger points for clarity
  pointBackgroundColor: dataPoints.map(pt => getPointColor(pt.y)),
  pointBorderColor: '#fff',
  borderWidth: 1
};

const ctx = document.getElementById('ragChart').getContext('2d');
new Chart(ctx, {
  type: 'scatter',
  data: {
    datasets: [ragDataset]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,
    scales: {
      x: {
        type: 'time',
        time: {
          unit: 'hour',
          displayFormats: {
            hour: 'HH:mm'
          }
        },
        title: {
          display: true,
          text: 'Time'
        },
        grid: {
          color: '#eee'
        }
      },
      y: {
        min: 40,
        max: 80,
        title: {
          display: true,
          text: 'Humidity (%)'
        },
        grid: {
          color: '#eee'
        }
      }
    },
    plugins: {
      tooltip: {
        callbacks: {
          label: function(context) {
            const humVal = context.parsed.y;
            let status = 'High';
            if (humVal < 60) status = 'Low';
            else if (humVal < 70) status = 'Caution';
            return `Humidity: ${humVal}% (${status} risk)`;
          }
        }
      },
      legend: {
        display: false
      }
    }
  }
});
</script>

</body>
</html>
